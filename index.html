<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Looping Video Gallery</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #060712;
      color: #f5f5f5;
    }

    header {
      padding: 1.5rem 2rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    header h1 {
      margin: 0;
      font-size: 1.5rem;
    }

    header p {
      margin: 0;
      font-size: 0.9rem;
      opacity: 0.75;
    }

    main {
      padding: 2rem;
    }

    .grid {
      display: grid;
      gap: 1.5rem;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    }

    .video-card {
      background: radial-gradient(circle at top left, #15182b, #05060d);
      border-radius: 1rem;
      padding: 1rem;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.35);
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .video-card h2 {
      margin: 0 0 0.5rem;
      font-size: 1rem;
    }

    .video-meta {
      font-size: 0.75rem;
      opacity: 0.7;
      margin-bottom: 0.75rem;
    }

    video {
      width: 100%;
      display: block;
      border-radius: 0.75rem;
      outline: none;
      background: black;
    }

    .note {
      margin-top: 1rem;
      font-size: 0.75rem;
      opacity: 0.8;
    }

    @media (max-width: 600px) {
      header, main {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <div>
      <h1>Looping Video Page</h1>
      <p>Each video loops between a custom start and end time.</p>
    </div>
  </header>

  <main>
    <section class="grid">

      <article class="video-card">
        <h2>First</h2>
        <div class="video-meta">
            First part but not sure what
         </div>
        <video
            src="videos/0 - not sure.mp4"
            controls
            playsinline
            webkit-playsinline
            loop
            muted
            preload="auto"
        ></video>
      </article>

        <article class="video-card">
        <h2>Merengue</h2>
        <div class="video-meta">
            Merengue part 1
         </div>
        <video
            src="videos/2 - Merengue part 1.mp4"
            controls
            playsinline
            webkit-playsinline
            loop
            muted
            preload="auto"
        ></video>
      </article>

            <article class="video-card">
        <h2>Merengue</h2>
        <div class="video-meta">
            Merengue part 2
         </div>
        <video
            src="videos/4 - Merengue part 2.mp4"
            controls
            playsinline
            webkit-playsinline
            loop
            muted
            preload="auto"
        ></video>
      </article>

      <article class="video-card">
        <h2>Bembe</h2>
        <div class="video-meta">
            Bembe 1
         </div>
        <video
            src="videos/6 - Bembe 1.mp4"
            controls
            playsinline
            webkit-playsinline
            loop
            muted
            preload="auto"
        ></video>
      </article>

      <article class="video-card">
        <h2>Bembe 2</h2>
        <div class="video-meta">
            Bembe
         </div>
        <video
            src="videos/8 - Bembe 3.mp4
            controls
            playsinline
            webkit-playsinline
            loop
            muted
            preload="auto"
        ></video>
      </article>

       <article class="video-card">
        <h2>Bembe 3</h2>
        <div class="video-meta">
            Bembe - stick and shaker
         </div>
        <video
            src="videos/9 - Stick and shaker.mp4"
            controls
            playsinline
            webkit-playsinline
            loop
            muted
            preload="auto"
        ></video>
      </article>

       <article class="video-card">
        <h2>Quinto 1</h2>
        <div class="video-meta">
           Quinto beats
         </div>
        <video
            src="videos/11 - Quinto 16 beats.mp4"
            controls
            playsinline
            webkit-playsinline
            loop
            muted
            preload="auto"
        ></video>
      </article>

      <article class="video-card">
        <h2>Quinto 2</h2>
        <div class="video-meta">
            Quinto
         </div>
        <video
            src="videos/12 - Quinto.mp4"
            controls
            playsinline
            webkit-playsinline
            loop
            muted
            preload="auto"
        ></video>
      </article>

      <article class="video-card">
        <h2>Quinto 3</h2>
        <div class="video-meta">
            Quinto Triplets
         </div>
        <video
            src="videos/13 - Quinto Triplets.mp4"
            controls
            playsinline
            webkit-playsinline
            loop
            muted
            preload="auto"
        ></video>
      </article>



     <article class="video-card">
        <h2>Quinto 4</h2>
        <div class="video-meta">
            Quinto languages
         </div>
        <video
            src="videos/14 - Quinto languages.mp4"
            controls
            playsinline
            webkit-playsinline
            loop
            muted
            preload="auto"
        ></video>
      </article>
    </section>

    

    <p class="note">
      Tip: Autoplay on mobile usually requires videos to be <strong>muted</strong> and
      <strong>playsinline</strong>, which is why those attributes are set by default.
    </p>
  </main>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    var videos = document.querySelectorAll("video[data-start][data-end]");

    Array.prototype.forEach.call(videos, function (video) {
      var start = parseFloat(video.getAttribute("data-start")) || 0;
      var end = parseFloat(video.getAttribute("data-end"));
      var loopTimer = null;

      video.addEventListener("loadedmetadata", function () {
        var duration = video.duration;

        if (start < 0) start = 0;
        if (isNaN(end) || end <= start) {
          end = duration - 0.05;
        }
        if (end > duration) {
          end = duration - 0.05;
        }

        video.setAttribute("data-loop-start", start);
        video.setAttribute("data-loop-end", end);

        // TRY to jump to the loop start once we know the duration
        if (start < duration) {
          video.currentTime = start;
        }
      });

      video.addEventListener("play", function () {
        var loopStartAttr =
          video.getAttribute("data-loop-start") ||
          video.getAttribute("data-start");
        var loopEndAttr =
          video.getAttribute("data-loop-end") ||
          video.getAttribute("data-end");

        var loopStart = parseFloat(loopStartAttr) || 0;
        var loopEnd = parseFloat(loopEndAttr);

        // First play: force us into the loop window
        if (
          video.currentTime < loopStart ||
          (!isNaN(loopEnd) && video.currentTime > loopEnd)
        ) {
          video.currentTime = loopStart;
        }

        // Clear any existing timer
        if (loopTimer) clearInterval(loopTimer);

        // Check position regularly while playing
        loopTimer = setInterval(function () {
          if (video.paused || video.readyState < 2) return;

          var sAttr =
            video.getAttribute("data-loop-start") ||
            video.getAttribute("data-start");
          var eAttr =
            video.getAttribute("data-loop-end") ||
            video.getAttribute("data-end");

          var s = parseFloat(sAttr) || 0;
          var e = parseFloat(eAttr);
          var now = video.currentTime;

          // If we somehow start before the loop start (mobile oddities), snap forward
          if (now < s - 0.02) {
            video.currentTime = s;
            return;
          }

          // Normal loop: when we reach the end, jump back to the start
          if (!isNaN(e) && now >= e) {
            video.currentTime = s + 0.01;
          }
        }, 80);
      });

      video.addEventListener("pause", function () {
        if (loopTimer) {
          clearInterval(loopTimer);
          loopTimer = null;
        }
      });

      video.addEventListener("ended", function () {
        if (loopTimer) {
          clearInterval(loopTimer);
          loopTimer = null;
        }
      });
    });
  });
</script>





</body>
</html>
